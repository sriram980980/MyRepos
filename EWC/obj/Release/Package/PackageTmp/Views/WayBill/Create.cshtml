@model EWC.Models.WayBill

@{
    ViewBag.Title = "Create";
}
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <div class="row">
        <div class="col-xs-12"><h3 class="text-center">Way Bill</h3></div>
        <div class="col-xs-5">Company:
            @foreach(int s in new int[]{1,2}){
                <label>
                @Html.RadioButtonFor(model=>model.Company,s)
                    Company @s</label>
            }
        </div>
        <div class="col-xs-7">
            <h2> </h2>
            <div class="form-group">
            @Html.LabelFor(model => model.DCNo, new {@class="col-sm-3 control-label" })
        
        <div class="col-sm-9">
            AutoGenerated
            @Html.ValidationMessageFor(model => model.DCNo)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.Date, new {@class="col-sm-3 control-label" })
            <div class="col-sm-9">
            @Html.TextBoxFor(model => model.Date,new {Value=DateTime.Now,@placeholder="DateTime",@readonly="readonly",@type="datetime"})
            @Html.ValidationMessageFor(model => model.Date)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.ServiceTax,new {@class="col-sm-3 control-label" })
        
                <div class="col-sm-9">
                    @Html.TextBoxFor(model => model.ServiceTax,new {@placeholder="Service Tax No",Value=System.Web.Configuration.WebConfigurationManager.AppSettings["serviceTax"]})
                    @Html.ValidationMessageFor(model => model.ServiceTax)
                </div>
         </div>
        <div class="form-group">
            @Html.LabelFor(model => model.TinNo,new {@class="col-sm-3 control-label" })
            <div class="col-sm-9">
                @Html.TextBoxFor(model => model.TinNo,new {@placeholder="Tin No",Value=System.Web.Configuration.WebConfigurationManager.AppSettings["tin"]})
                @Html.ValidationMessageFor(model => model.TinNo)
            </div>
        </div>

            <div class="form-group">
            @Html.LabelFor(model => model.IncomeTaxPan,new {@class="col-sm-3 control-label" })
            <div class="col-sm-9">
                @Html.TextBoxFor(model => model.IncomeTaxPan,new {@placeholder="IT Pan No",Value=System.Web.Configuration.WebConfigurationManager.AppSettings["gir"]})
                @Html.ValidationMessageFor(model => model.IncomeTaxPan)
            </div>
        </div>
            @*<div class="form-group">
            @Html.LabelFor(model => model.QtyUnits, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.EditorFor(model => model.QtyUnits,new {@placeholder="'Kgs' or 'Tons' etc"})
            @Html.ValidationMessageFor(model => model.QtyUnits)
        </div>
</div>*@


        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 text-center"><hr /><h4>Customer Details<span class="btn btn-default" onclick="picke()">Pick</span></h4></div>
        <div class="col-xs-6">
            <div class="form-group">
            @Html.LabelFor(model => model.customer.NameofCompany, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.NameofCompany,new {@placeholder="Name of Company"})
            @Html.ValidationMessageFor(model => model.customer.NameofCompany)
        </div>
        </div>
                        <div class="form-group">
            @Html.LabelFor(model => model.customer.Address, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.TextAreaFor(model => model.customer.Address,new {@placeholder="Address",@rows="3"})
            @Html.ValidationMessageFor(model => model.customer.Address)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.ContactPerson, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.ContactPerson,new {@placeholder="Contact Person Name"})
            @Html.ValidationMessageFor(model => model.customer.ContactPerson)
        </div>

            </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.ContactNo, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.ContactNo,new {@placeholder="Contact No"})
            @Html.ValidationMessageFor(model => model.customer.ContactNo)
        </div>
            </div>


            </div>

        <div class="col-xs-6">
            <div class="form-group">
            @Html.LabelFor(model => model.customer.InwardDcNo, new {@class="col-sm-3" })
        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.InwardDcNo,new {@placeholder="Inward DC No"})
            @Html.ValidationMessageFor(model => model.customer.InwardDcNo)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.Dated, new {@class="col-sm-3" })
        <div class="col-sm-9">
            @Html.TextBoxFor(model => model.customer.Dated,new {Value=DateTime.Now,@placeholder="Inward DC Dated",@readonly="readonly"})
            @Html.ValidationMessageFor(model => model.customer.Dated)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.CustomerTin, new {@class="col-sm-3" })
        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.CustomerTin,new {@placeholder="Customer Tin"})
            @Html.ValidationMessageFor(model => model.customer.Dated)
        </div>
        </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.CustomerWorkOrderNo, new {@class="col-sm-3" })
        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.CustomerWorkOrderNo,new {@placeholder="Customer Tin"})
            @Html.ValidationMessageFor(model => model.customer.CustomerWorkOrderNo)
        </div>
        </div>
                        <div class="form-group">
            @Html.LabelFor(model => model.customer.ContactNo2, new {@class="col-sm-3" })

        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.ContactNo2,new {@placeholder="Contact No"})
            @Html.ValidationMessageFor(model => model.customer.ContactNo2)
        </div>
            </div>
            <div class="form-group">
            @Html.LabelFor(model => model.customer.ContactNo3, new {@class="col-sm-3" })
        <div class="col-sm-9">
            @Html.EditorFor(model => model.customer.ContactNo3,new {@placeholder="Contactno"})
            @Html.ValidationMessageFor(model => model.customer.ContactNo3)
        </div>
        </div>
        </div>
        <hr />

    </div>
    <div class="row" id="itemsHolder">
        <div class="col-xs-12 text-center"><hr /><h4>Items</h4></div>
            <div class="row"><div class="col-xs-1">Sno.</div>
                <div class="col-xs-2">PartNo</div>
            <div class="col-xs-3">Description</div>
            <div class="col-xs-2">Material</div>
                
            <div class="col-xs-1 QtyforItems">Qty</div>
                <div class="col-xs-1">ScrapReturn</div>
                <div class="col-xs-1"><span class="glyphicon glyphicon-plus" id="AddItemsRow">AddItems</span></div>

            </div>
        @{var i = 0;}
        @do{
        <div class="itemsRow row">
            <div class="col-xs-1">1</div>
            <div class="col-xs-2 ">@Html.EditorFor(model => model.Items[i].Partno,new {@placeholder="Material"})</div>
            <div class="col-xs-3">@Html.EditorFor(model => model.Items[i].Desc,new {@placeholder="Description"})</div>
            <div class="col-xs-2">@Html.EditorFor(model => model.Items[i].Material,new {@placeholder="Material"})</div>
            <div class="col-xs-1 QtyforItems">@Html.EditorFor(model => model.Items[i].Quantity,new {@placeholder="Material"})</div>
            <div class="col-xs-1 ">@Html.EditorFor(model => model.Items[i].scrapreturn,new {@placeholder="Material"})</div>
            </div>
            i++;
        } while (null!=Model&&i < Model.Items.Count());
            </div>
        
            <input type="submit"  class="btn btn-success pull-right" value="Create" />
    }

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<div id="myModal" class="modal fade">
    <div class="modal-dialog  modal-lg " style="min-width:1200px;width:100%" onshow="$('.modal-body.king').height( $('iframe').contents().find('body').outerHeight()+30);">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Pick Customer</h4>
            </div>
            <div class="modal-body king" style="height:auto">
                <iframe src="/DBCustomer/" scrolling="vertical" width="100%" style="height:100%"  onload="$('.modal-body.king').height( $('iframe').contents().find('body').outerHeight()+30);"></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript">
    function picke(e){
        $('#myModal').modal('show');
        $('.modal-body').height($('iframe').contents().find('body').outerHeight() + 30);
    }
    $(document).ready(function () {
        $('#AddItemsRow').click(function () {
            var myVariable = '<div class="itemsRow row">'+
            '<div class="col-xs-1">' + ($('.itemsRow').length + 1) + '</div>' +
                        '<div class="col-xs-2 "><input class="text-box single-line" data-val="true" id="Items_' + $('.itemsRow').length + '__Partno" name="Items[' + $('.itemsRow').length + '].Partno" type="number"></div>' +
            '<div class="col-xs-3"><input class="text-box single-line" id="Items_' + $('.itemsRow').length + '__Desc" name="Items[' + $('.itemsRow').length + '].Desc" type="text" ></div>' +
            '<div class="col-xs-2"><input class="text-box single-line" id="Items_' + $('.itemsRow').length + '__Material" name="Items[' + $('.itemsRow').length + '].Material" type="text" ></div>' +
            '<div class="col-xs-1 QtyforItems"><input class="text-box single-line" id="Items_' + $('.itemsRow').length + '__Quantity" name="Items[' + $('.itemsRow').length + '].Quantity" type="text" ></div>' +
            '<div class="col-xs-1 "><input class="check-box" id="Items_' + $('.itemsRow').length + '__scrapreturn" name="Items[' + $('.itemsRow').length + '].scrapreturn" type="checkbox" value="true"><input name="Items[' + $('.itemsRow').length + '].scrapreturn" type="hidden" value="false"></div>' +
            '</div>';
            $('#itemsHolder').append(myVariable);
        });
        $('[type="datetime"]').datetimepicker({ pickTime: true, "autoclose": true});

    });

</script>
}

